# 3.1:クラス単体で正常に動作するよう設計する

**まず大事にしたいのは、「クラスが単体で正常動作するよう設計する」という考え方です。**

## 3.1.1:悪魔に負けない、頑強なクラスの構成要素

クラスの構成要素は次の２つです。

- インスタンス変数
- メソッド

この構成を、より悪魔を招きづらいものにするには、**メソッドの役割を明確化する必要があります。**

これを踏まえた、良いクラスの構成要素は次のように言い換えられます。

- **インスタンス変数**
- **インスタンス変数を不正状態から防御そい、正常に操作するメソッド**

この２つの要素を両方備えたクラスが悪魔退治の武器になります。
どれか１つが欠けてもだめです。


`図3.1:良いクラスの構成`

|GoodClass|
|:--|
|field:type|
|method():type|

**※メソッドは必ずインスタンス変数を使用する**

`図3.2:良くないクラスの構成`

|EvilClass_A|
|:--|
|field:type|
|　　　　|

|EvilClass_B|
|:--|
|　　　　|
|method():type|

メソッド、インスタンス変数のどちらが欠けても良くない。
ただし、目的によっては例外的にこのような構造が必要になる場合もある。

なぜ、これらのルールを守らなければならないのでしょう？

データクラスで起こっていた弊害を思い出して下さい。
データクラスのインスタンス変数を操作するロジックが、まったく別のクラスに実装されていたために、関連しあうもの同士の認知が困難になり、

- 重複コードの発生
- 修正漏れ
- 可読性の低下

を招いていましたね

## 3.1.2:すべてのクラスに備わる自己防衛責務

自分の身は自分で守らせる。
自己防衛責務をすべてのクラスが備える。
この考え方が、ソフトウェアの品質を考える上で重要です。